#!/usr/bin/env ruby
# Get the Gtk2App library
require 'rubygems'
gem 'gtk2applib', '~> 10'
require 'gtk2applib'
include Gtk2AppLib
include Configuration

file = ARGV.shift

application = DEFAULT_APPLICATION
kill = false
FILE_APP_MAP.each {|pattern,app,kll|
  if file=~pattern then
    application = app
    kill = kll
    break
  end
}

system("killall -q #{application}")	if kill
system("(#{application} #{file}) > /dev/null 2>&1 &")
if kill then
  system("killall -q #{application}") if DIALOGS.question?(*KILL_APP_DIALOG)
end
