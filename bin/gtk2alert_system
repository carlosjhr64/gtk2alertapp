#!/usr/bin/env ruby
# Get the Gtk2App library
require 'rubygems'
gem 'gtk2applib', '~> 9.1'
require 'gtk2applib'
include Gtk2AppLib
include Configuration

def alert(file)
  FILE_APP_MAP.each {|pattern,app,kill|
    if file=~pattern then
      system("killall -q #{app}")	if kill
      system("(#{app} #{file}) > /dev/null 2>&1 &")
      if kill then
        resp = DIALOGS.question?(*KILL_APP_DIALOG)
        system("killall -q #{app}") if resp
      end
      return
    end
  }
end

file = ARGV.shift
alert(file)
